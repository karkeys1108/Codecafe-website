# Render Configuration
services:
  - type: web
    name: codecafe
    env: static
    buildCommand: npm install && npm run build
    staticPublishPath: "./dist"
    routes:
      - type: rewrite
        source: "/terms-of-service"
        destination: "/index.html"
      - type: rewrite
        source: "/cookies-policy"
        destination: "/index.html"
      - type: rewrite
        source: "/*"
        destination: "/index.html"
    headers:
      - path: "/*"
        name: "Cache-Control"
        value: "no-cache, no-store, must-revalidate"
      - path: "/assets/*"
        name: "Cache-Control"
        value: "public, max-age=31536000"
    envVars:
      - key: NODE_VERSION
        value: 18.x
      - key: VITE_BASE_URL
        value: "/"

# Redirects
redirects:
  - from: "www.codecafe.live/*"
    to: "codecafe.live$1"
    status: 301
  - from: "/terms-of-service/"
    to: "/terms-of-service"
    status: 301
  - from: "/cookies-policy/"
    to: "/cookies-policy"
    status: 301
